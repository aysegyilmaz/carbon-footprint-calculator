<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Karbon Ayak İzi Hesaplayıcı</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<h1>Karbon Kaydı Ekle</h1>

<form id="carbonForm">
    <label>Aktivite Adı</label>
    <input type="text" id="activityName" required>

    <label>Süre (dakika)</label>
    <input type="number" id="durationMinutes" required>

    <button type="submit">Kaydet</button>
</form>

<h2>Kayıtlar</h2>
<ul id="recordList"></ul>

<script>
    document.getElementById("carbonForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const data = {
            activityName: document.getElementById("activityName").value,
            durationMinutes: document.getElementById("durationMinutes").value
        };

        fetch("http://localhost:8080/api/carbon/save", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        })
            .then(res => res.json())
            .then(() => {
                loadRecords();
                document.getElementById("carbonForm").reset();
            });
    });

    function loadRecords() {
        fetch("http://localhost:8080/api/carbon/all")
            .then(res => res.json())
            .then(data => {
                const list = document.getElementById("recordList");
                list.innerHTML = "";
                data.forEach(r => {
                    const li = document.createElement("li");
                    li.textContent = `${r.activityName} - ${r.durationMinutes} dk`;
                    list.appendChild(li);
                });
            });
    }

    loadRecords();
</script>

</body>
</html>
